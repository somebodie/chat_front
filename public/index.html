<!DOCTYPE html>
<html ng-app='ChattyBlog'>

<head>
    <meta charset="utf-8">
    <title>Chatty Blog</title>
    <!-- Angular Script -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular.js"></script>
    <!-- UI-Router -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-router/0.2.15/angular-ui-router.min.js"></script>
    <!-- Router -->
    <script src='js/router.js'></script>
    <!-- Factories -->
    <script src="/js/factories/auth_interceptor.js"></script>
    <script src="/js/factories/auth_token_factory.js"></script>
    <!-- Controllers -->
    <script src='js/controllers/HomeController.js'></script>
    <script src='js/controllers/BlogController.js'></script>
    <script src='js/controllers/CommentController.js'></script>
    <!-- App -->
    <script src="js/app.js"></script>
</head>

<body ng-controller='HomeController as home'>
    <header>
        <nav>
            <ul ng-controller='BlogController as blog'>
                <ul class="adminsLinks" ng-show='home.control'>
                    <li ui-sref="list">Admin's List</li>
                    <li ui-sref='new'>New</li>
                    <li ui-sref="update">Update</li>
                </ul>
                <label>Search: <input ng-model="searchText"></label>
                <!-- TODO: SEARCH BAR: https://docs.angularjs.org/api/ng/filter/filter -->
                <div id="searchTextResults">
                    <ul ng-repeat="article in blog.blogs | filter:searchText">
                        <li ng-click='blog.getBlog(article)'> {{article.title}} by {{article.author}}</li>
                        <!-- FIXME: get blog on selection -->
                        <!-- <menuitem type="command" label="Save"> -->
                    </ul>
                </div>
            </ul>
        </nav>
    </header>
    <main>

        <ui-view></ui-view>

        <h1>SIGN UP</h1>
    </main>
    <footer>
        <div class="signup">
            <form ng-submit="home.signup(userPass)">
                <input type="text" ng-model="userPass.name" placeholder="name">
                <input type="text" ng-model="userPass.user_name" placeholder="user name">
                <input type="email" ng-model="userPass.email" placeholder="email">
                <input type="password" ng-model="userPass.password" placeholder="password">
                <input type="checkbox" ng-model='userPass.admin' ng-hide='admin'>
                <button type="submit">login</button>
            </form>
        </div>

        <h1>LOG IN</h1>
        <div class="login">
            <form ng-submit="home.login(userPass)">
                <input type="text" ng-model="userPass.email" placeholder="email">
                <input type="password" ng-model="userPass.password" placeholder="password">
                <input type="submit" value="login">
            </form>
        </div>

        <h1>LOG OUT</h1>
        <button type="button" name="logout" ng-click='home.logout()'>Log Off!</button>
</body>
</footer>

</html>
